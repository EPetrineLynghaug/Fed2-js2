import{b as v,h as w}from"./headers-B4k_fb22.js";async function y(o){try{const n=await fetch(`${v}/${o}`,{method:"DELETE",headers:w()});if(!n.ok)throw new Error(`Response Status: ${n.status}`);return n.status===204}catch(n){console.error("Error deleting post:",n)}}async function T(o,n){if(confirm("Are you sure you want to delete this post?"))try{await y(n)?(console.log(`Post with ID ${n} was deleted successfully`),o&&o.remove(),alert("Post deleted successfully")):console.error("Failed to delete post: No response from API")}catch(e){console.error("Failed to delete post:",e)}}function g(o,n){const c=document.createElement("div");return c.className="articles-container",o.map(e=>{const i=document.createElement("div");i.className="article-Container";const d=document.createElement("div");if(d.className="user-Info",e.author){const t=document.createElement("a");t.href=`/profile/?name=${e.author.name}`,t.innerText=e.author.name,d.append(t)}const r=document.createElement("div");r.className="article-Body";const f=document.createElement("h2");f.innerText=e.title,r.append(f);const E=document.createElement("p");E.innerText=e.body,r.append(E);const l=document.createElement("p");l.className="tags",e.tags.map(t=>{const a=document.createElement("span");a.innerText=t,l.append(a)}),r.append(l);const m=document.createElement("div");m.className="post-date";const h=new Date(e.created);if(m.innerText=`Posted on: ${h.toLocaleDateString()}`,r.append(m),e.media&&e.media.url){const t=document.createElement("div");t.className="media-container";const a=document.createElement("img");a.src=e.media.url,a.alt=e.media.alt||"Post image",t.append(a),r.append(t)}const s=document.createElement("div");s.className="button-container";const u=document.createElement("button");if(u.innerText="Read Post",u.addEventListener("click",()=>{window.location.href=`/post/single-post/?id=${e.id}`}),s.append(u),n){const t=document.createElement("button");t.innerText="Edit",t.addEventListener("click",async p=>{p.preventDefault(),window.location.href=`/post/edit/?id=${e.id}`});const a=document.createElement("button");a.innerText="Delete",a.addEventListener("click",async p=>{p.preventDefault(),await T(i,e.id)}),s.append(t,a)}r.append(s),i.append(d,r),c.append(i)}),c}export{g as c};
