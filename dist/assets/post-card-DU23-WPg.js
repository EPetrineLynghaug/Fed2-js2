import{b as g,h as v}from"./headers-B4k_fb22.js";async function w(o){try{const t=await fetch(`${g}/${o}`,{method:"DELETE",headers:v()});if(!t.ok)throw new Error(`Response Status: ${t.status}`);return t.status===204}catch(t){throw t.name==="TypeError"?console.error("Network error or request failed:",t.message):t.message.includes("Response Status")?console.error(`Failed to delete post (ID: ${o}):`,t.message):console.error("An unexpected error occurred while deleting the post:",t.message),t}}async function T(o,t){if(confirm("Are you sure you want to delete this post?"))try{if(await w(t))o&&o.remove(),alert("Post deleted successfully");else throw new Error("No response received from the API")}catch(e){console.error("Failed to delete post:",e.message),alert(`There was an error deleting the post: ${e.message}. Please try again later.`)}}function D(o,t){const c=document.createElement("div");return c.className="articles-container",o.map(e=>{const s=document.createElement("div");s.className="article-Container";const d=document.createElement("div");if(d.className="user-Info",e.author){const n=document.createElement("a");n.href=`/profile/?name=${e.author.name}`,n.innerText=e.author.name,d.append(n)}const r=document.createElement("div");r.className="article-Body";const f=document.createElement("h2");f.innerText=e.title,r.append(f);const E=document.createElement("p");E.innerText=e.body,r.append(E);const l=document.createElement("p");l.className="tags",e.tags.map(n=>{const a=document.createElement("span");a.innerText=n,l.append(a)}),r.append(l);const m=document.createElement("div");m.className="post-date";const h=new Date(e.created);if(m.innerText=`Posted on: ${h.toLocaleDateString()}`,r.append(m),e.media&&e.media.url){const n=document.createElement("div");n.className="media-container";const a=document.createElement("img");a.src=e.media.url,a.alt=e.media.alt||"Post image",n.append(a),r.append(n)}const i=document.createElement("div");i.className="button-container";const u=document.createElement("button");if(u.innerText="Read Post",u.addEventListener("click",()=>{window.location.href=`/post/single-post/?id=${e.id}`}),i.append(u),t){const n=document.createElement("button");n.innerText="Edit",n.addEventListener("click",async p=>{p.preventDefault(),window.location.href=`/post/edit/?id=${e.id}`});const a=document.createElement("button");a.innerText="Delete",a.addEventListener("click",async p=>{p.preventDefault(),await T(s,e.id)}),i.append(n,a)}r.append(i),s.append(d,r),c.append(s)}),c}export{D as c};
