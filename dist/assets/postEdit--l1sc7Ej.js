import{a as m}from"./read-CmCrdR5P.js";import{a as p}from"./authGuard-C2GFzsuy.js";import{b as f,h as g}from"./headers-B4k_fb22.js";import{n as h}from"./navbar-BTogxb2F.js";async function y(t,a){try{const e=await fetch(`${f}/${t}`,{method:"PUT",headers:g(),body:JSON.stringify(a)});if(!e.ok)throw new Error(`Failed to update post. Response Status: ${e.status}`);return(await e.json()).data}catch(e){throw e.name==="TypeError"?console.error("Network error or request failed:",e.message):e.message.includes("Response Status")?console.error(`Failed to update post (ID: ${t}):`,e.message):console.error("An unexpected error occurred while updating the post:",e.message),e}}async function w(t,a){t.preventDefault();const e=t.target,r=e?e[0].value:"",d=e?e[1].value:"",u=e?e[2].value:"",s=e?e[3].value:"",c=e?e[4].value:"",n=u.split(" "),l={title:r,body:d||void 0,tags:n.length>0?n:void 0,media:s?{url:s,alt:c||void 0}:void 0};await y(a,l)&&(window.location.href=`/post/single-post/?id=${a}`)}p();h();const i=new URLSearchParams(window.location.search).get("id"),o=await m(i);o&&(document.querySelector('input[name="title"]').value=o.title||"",document.querySelector('textarea[name="body"]').value=o.body||"",document.querySelector('input[name="tags"]').value=o.tags?o.tags.join(" "):"",document.querySelector('input[name="media"]').value=o.media?o.media.url:"");const v=document.forms.editPost;v.addEventListener("submit",t=>w(t,i));
