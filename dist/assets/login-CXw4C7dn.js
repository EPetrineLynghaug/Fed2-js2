import{n as i}from"./navbar-ChR7nwex.js";import{A as c,h as l}from"./headers-B4k_fb22.js";import{e as m,p as u}from"./regex-BICRGNfc.js";import{s}from"./customAlert-u-7FB-Wo.js";async function d({email:t,password:o}){try{const e={email:t,password:o},a=await fetch(c,{method:"POST",headers:l(),body:JSON.stringify(e)});if(!a.ok)throw new Error(`Response Status: ${a.status}`);return(await a.json()).data}catch(e){throw e.name==="TypeError"?console.error("Network error or invalid JSON:",e.message):console.error("Login failed:",e.message),e}}async function f(t){t.preventDefault();const o=t.target,e=o?o[0].value.trim():"",a=o?o[1].value.trim():"";if(!m(e)){s("Invalid email format. Please use a valid Noroff student email, such as 'user@stud.noroff.no' or 'user@noroff.no'.","error");return}if(!u(a)){s("Invalid password. Password must be 8-20 characters long and can only include letters and numbers.","error");return}try{const r=await d({email:e,password:a});if(!r){s("Login failed. Please check your email and password and try again.","error");return}const n={name:r.name,email:r.email,bio:r.bio,avatar:r.avatar,banner:r.banner};localStorage.setItem("token",r.accessToken),localStorage.setItem("userInfo",JSON.stringify(n)),s("Login successful! Redirecting to your dashboard...","success"),setTimeout(()=>{window.location.href="/"},1500)}catch(r){s("An unexpected error occurred during login. Please try again later.","error"),console.error("Login error:",r)}}i();const g=document.forms.login;g.addEventListener("submit",f);
