import{b as T,h as D}from"./headers-B4k_fb22.js";import{s as b}from"./customAlert-u-7FB-Wo.js";async function $(o){try{const t=await fetch(`${T}/${o}`,{method:"DELETE",headers:D()});if(!t.ok)throw new Error(`Response Status: ${t.status}`);return t.status===204}catch(t){throw t.name==="TypeError"?console.error("Network error or request failed:",t.message):t.message.includes("Response Status")?console.error(`Failed to delete post (ID: ${o}):`,t.message):console.error("An unexpected error occurred while deleting the post:",t.message),t}}async function P(o,t){if(await b("Are you sure you want to delete this post?","info",!0))try{if(await $(t))o&&o.remove(),b("Post deleted successfully","success");else throw new Error("No response received from the API")}catch(l){console.error("Failed to delete post:",l.message),b(`There was an error deleting the post: ${l.message}. Please try again later.`,"error")}}function L(o,t){const c=document.createElement("div");c.className="min-w-100 w-full max-w-screen-xl gap-8 py-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3";const l="https://via.placeholder.com/400x300?text=No+Image+Available";return o.forEach(e=>{const s=document.createElement("div");s.className="rounded-lg p-4 flex flex-col justify-between w-full max-w-md mx-auto border border-gray-600",s.style.borderRadius="18px",s.classList.add("min-h-[500px]");const u=document.createElement("div");if(u.className="user-info mb-3 flex items-center font-semibold text-gray-200",e.author){const a=document.createElement("a");a.href=`/profile/?name=${e.author.name}`,a.innerText=e.author.name,a.className="text-purple-400 hover:underline transition duration-200 ease-in-out",u.append(a)}const n=document.createElement("div");n.className="article-body space-y-3 overflow-hidden relative flex flex-col";const p=document.createElement("h2");p.innerText=e.title,p.className="text-lg font-bold truncate text-gray-200",n.append(p);const f=document.createElement("p"),g=e.body.split(". ").slice(0,2).join(". ")+".";f.innerText=g.length>100?g.substring(0,100)+"...":g,f.className="text-sm leading-relaxed text-gray-400",n.append(f);const x=document.createElement("p");x.className="tags flex flex-wrap gap-1 mt-2 text-xs text-gray-400";const h=e.tags.slice(0,3);for(;h.length<3;)h.push("Placeholder");h.forEach(a=>{const r=document.createElement("span");r.innerText=`#${a}`,r.className="px-2 py-1 rounded-full bg-gray-800 text-gray-200",x.append(r)}),n.append(x);const w=document.createElement("div");w.className="post-date text-xs text-gray-400";const N=new Date(e.created);w.innerText=`Posted on: ${N.toLocaleDateString()}`,n.append(w);const y=document.createElement("div");y.className="media-container mt-4 h-48 rounded-lg overflow-hidden";const i=document.createElement("img");i.src=e.media&&e.media.url?e.media.url:l,i.alt=e.media&&e.media.alt?e.media.alt:"Placeholder image",i.className="w-full h-full object-cover rounded-md",y.append(i),n.append(y);const d=document.createElement("div");d.className="button-container flex gap-2 mt-2";const v="text-white font-medium px-2 py-1 md:px-3 md:py-1.5 lg:px-4 lg:py-2 rounded focus:outline-none focus:ring-1 focus:ring-offset-1 transition-colors duration-150 ease-in-out",m=document.createElement("button");if(m.innerText="Read Post",m.className=`${v} bg-teal-500 hover:bg-teal-600`,m.addEventListener("click",()=>{window.location.href=`/post/single-post/?id=${e.id}`}),d.append(m),t){const a=document.createElement("button");a.innerText="Edit",a.className=`${v} bg-purple-400 hover:bg-purple-500`,a.addEventListener("click",E=>{E.preventDefault(),window.location.href=`/post/edit/?id=${e.id}`});const r=document.createElement("button");r.innerText="Delete",r.className=`${v} bg-red-500 hover:bg-red-600`,r.addEventListener("click",async E=>{E.preventDefault(),await P(s,e.id)}),d.append(a,r)}n.append(d),s.append(u,n),c.append(s)}),c}export{L as c};
