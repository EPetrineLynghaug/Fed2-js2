import{b as w,h as y}from"./headers-B4k_fb22.js";async function v(o){try{const a=await fetch(`${w}/${o}`,{method:"DELETE",headers:y()});if(!a.ok)throw new Error(`Response Status: ${a.status}`);return a.status===204}catch(a){throw a.name==="TypeError"?console.error("Network error or request failed:",a.message):a.message.includes("Response Status")?console.error(`Failed to delete post (ID: ${o}):`,a.message):console.error("An unexpected error occurred while deleting the post:",a.message),a}}async function E(o,a){if(confirm("Are you sure you want to delete this post?"))try{if(await v(a))o&&o.remove(),alert("Post deleted successfully");else throw new Error("No response received from the API")}catch(e){console.error("Failed to delete post:",e.message),alert(`There was an error deleting the post: ${e.message}. Please try again later.`)}}function N(o,a){const c=document.createElement("div");return c.className="min-w-100 w-100 max-w-screen-xl grid grid-cols-3 gap-8 py-8",o.forEach(e=>{const l=document.createElement("div");l.className="bg-backgroundCard rounded-lg shadow-lg p-6 flex flex-col justify-between transition-transform transform hover:scale-105 max-h-[450px] w-full max-w-md mx-auto";const m=document.createElement("div");if(m.className="user-info mb-4 flex items-center text-textPrimary font-semibold",e.author){const t=document.createElement("a");t.href=`/profile/?name=${e.author.name}`,t.innerText=e.author.name,t.className="text-linkColor hover:underline",m.append(t)}const n=document.createElement("div");n.className="article-body flex-grow space-y-4 overflow-hidden";const u=document.createElement("h2");u.innerText=e.title,u.className="text-xl font-bold text-textPrimary truncate",n.append(u);const f=document.createElement("p");f.innerText=e.body,f.className="text-textSecondary text-sm leading-relaxed line-clamp-4",n.append(f);const p=document.createElement("p");p.className="tags flex flex-wrap gap-2 mt-4 text-xs text-warmGray",e.tags.forEach(t=>{const r=document.createElement("span");r.innerText=`#${t}`,r.className="bg-gray-700 px-3 py-1 rounded-full text-softWhite",p.append(r)}),n.append(p);const x=document.createElement("div");x.className="post-date text-xs text-warmGray mt-6";const g=new Date(e.created);x.innerText=`Posted on: ${g.toLocaleDateString()}`,n.append(x);const s=document.createElement("div");if(e.media&&e.media.url){s.className="media-container mt-4 rounded-lg overflow-hidden h-48";const t=document.createElement("img");t.src=e.media.url,t.alt=e.media.alt||"Post image",t.className="w-full h-full object-cover rounded-md",s.append(t)}else s.className="media-container mt-4 h-48 flex items-center justify-center bg-gray-800 text-softWhite rounded-lg",s.innerText="No image available";n.append(s);const i=document.createElement("div");i.className="button-container flex gap-3 mt-6";const d=document.createElement("button");if(d.innerText="Read Post",d.className="bg-primaryTeal text-softWhite px-5 py-2 rounded-md hover:bg-tealDark",d.addEventListener("click",()=>{window.location.href=`/post/single-post/?id=${e.id}`}),i.append(d),a){const t=document.createElement("button");t.innerText="Edit",t.className="bg-tealLight text-softWhite px-5 py-2 rounded-md hover:bg-tealDark",t.addEventListener("click",async h=>{h.preventDefault(),window.location.href=`/post/edit/?id=${e.id}`});const r=document.createElement("button");r.innerText="Delete",r.className="bg-complementaryCoral text-softWhite px-5 py-2 rounded-md hover:bg-coralDark",r.addEventListener("click",async h=>{h.preventDefault(),await E(l,e.id)}),i.append(t,r)}n.append(i),l.append(m,n),c.append(l)}),c}export{N as c};
