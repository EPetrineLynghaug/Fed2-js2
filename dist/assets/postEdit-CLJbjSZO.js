import{a as m}from"./read-83GwmSIF.js";import{a as p}from"./authGuard-C2GFzsuy.js";import{b as f,h as y}from"./headers-B4k_fb22.js";async function g(o,a){try{const t=await fetch(`${f}/${o}`,{method:"PUT",headers:y(),body:JSON.stringify(a)});if(!t.ok)throw new Error(`Failed to update post. Response Status: ${t.status}`);const n=await t.json();return console.log("Post updated:",n),n.data}catch(t){console.error("Error editing post:",t)}}async function h(o,a){o.preventDefault();const t=o.target,n=t?t[0].value:"",i=t?t[1].value:"",u=t?t[2].value:"",s=t?t[3].value:"",c=t?t[4].value:"",r=u.split(" "),l={title:n,body:i||void 0,tags:r.length>0?r:void 0,media:s?{url:s,alt:c||void 0}:void 0};await g(a,l)&&(window.location.href=`/post/single-post/?id=${a}`)}p();const d=new URLSearchParams(window.location.search).get("id"),e=await m(d);e&&(document.querySelector('input[name="title"]').value=e.title||"",document.querySelector('textarea[name="body"]').value=e.body||"",document.querySelector('input[name="tags"]').value=e.tags?e.tags.join(" "):"",document.querySelector('input[name="media"]').value=e.media?e.media.url:"");const w=document.forms.editPost;w.addEventListener("submit",o=>h(o,d));
