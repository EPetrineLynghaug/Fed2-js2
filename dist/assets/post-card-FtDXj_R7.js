import{b as h,h as y}from"./headers-B4k_fb22.js";async function E(o){try{const a=await fetch(`${h}/${o}`,{method:"DELETE",headers:y()});if(!a.ok)throw new Error(`Response Status: ${a.status}`);return a.status===204}catch(a){throw a.name==="TypeError"?console.error("Network error or request failed:",a.message):a.message.includes("Response Status")?console.error(`Failed to delete post (ID: ${o}):`,a.message):console.error("An unexpected error occurred while deleting the post:",a.message),a}}async function w(o,a){if(confirm("Are you sure you want to delete this post?"))try{if(await E(a))o&&o.remove(),alert("Post deleted successfully");else throw new Error("No response received from the API")}catch(e){console.error("Failed to delete post:",e.message),alert(`There was an error deleting the post: ${e.message}. Please try again later.`)}}function b(o,a){const s=document.createElement("div");return s.className="articles-container grid grid-cols-1 gap-6 p-4 md:grid-cols-2 lg:grid-cols-3",o.forEach(e=>{const c=document.createElement("div");c.className="article-Container bg-backgroundCard rounded-lg shadow-lg p-4 flex flex-col justify-between";const d=document.createElement("div");if(d.className="user-Info mb-2 flex items-center text-textPrimary font-medium",e.author){const t=document.createElement("a");t.href=`/profile/?name=${e.author.name}`,t.innerText=e.author.name,t.className="text-linkColor hover:underline",d.append(t)}const n=document.createElement("div");n.className="article-Body flex-grow space-y-2";const m=document.createElement("h2");m.innerText=e.title,m.className="text-xl font-bold text-textPrimary",n.append(m);const u=document.createElement("p");u.innerText=e.body,u.className="text-textSecondary text-sm",n.append(u);const p=document.createElement("p");p.className="tags flex flex-wrap gap-2 mt-2 text-xs text-warmGray",e.tags.forEach(t=>{const r=document.createElement("span");r.innerText=`#${t}`,r.className="bg-gray-700 px-2 py-1 rounded-full text-softWhite",p.append(r)}),n.append(p);const f=document.createElement("div");f.className="post-date text-xs text-warmGray mt-4";const g=new Date(e.created);if(f.innerText=`Posted on: ${g.toLocaleDateString()}`,n.append(f),e.media&&e.media.url){const t=document.createElement("div");t.className="media-container mt-4 rounded-lg overflow-hidden";const r=document.createElement("img");r.src=e.media.url,r.alt=e.media.alt||"Post image",r.className="w-full h-auto object-cover",t.append(r),n.append(t)}const l=document.createElement("div");l.className="button-container flex gap-2 mt-4";const i=document.createElement("button");if(i.innerText="Read Post",i.className="bg-primaryTeal text-softWhite px-4 py-2 rounded hover:bg-tealDark",i.addEventListener("click",()=>{window.location.href=`/post/single-post/?id=${e.id}`}),l.append(i),a){const t=document.createElement("button");t.innerText="Edit",t.className="bg-tealLight text-softWhite px-4 py-2 rounded hover:bg-tealDark",t.addEventListener("click",async x=>{x.preventDefault(),window.location.href=`/post/edit/?id=${e.id}`});const r=document.createElement("button");r.innerText="Delete",r.className="bg-complementaryCoral text-softWhite px-4 py-2 rounded hover:bg-coralDark",r.addEventListener("click",async x=>{x.preventDefault(),await w(c,e.id)}),l.append(t,r)}n.append(l),c.append(d,n),s.append(c)}),s}export{b as c};
